var l=function(){if(!(P>1)){var Y,e=!1;while(T!==void 0){var a=T;T=void 0,K++;while(a!==void 0){var s=a.o;if(a.o=void 0,a.f&=-3,!(8&a.f)&&q(a))try{a.c()}catch(y){if(!e)Y=y,e=!0}a=s}}if(K=0,P--,e)throw Y}else P--};var f=function(Y){if(n!==void 0){var e=Y.n;if(e===void 0||e.t!==n){if(e={i:0,S:Y,p:n.s,n:void 0,t:n,e:void 0,x:void 0,r:e},n.s!==void 0)n.s.n=e;if(n.s=e,Y.n=e,32&n.f)Y.S(e);return e}else if(e.i===-1){if(e.i=0,e.n!==void 0){if(e.n.p=e.p,e.p!==void 0)e.p.n=e.n;e.p=n.s,e.n=void 0,n.s.n=e,n.s=e}return e}}},E=function(Y){this.v=Y,this.i=0,this.n=void 0,this.t=void 0},p=function(Y){return new E(Y)},q=function(Y){for(var e=Y.s;e!==void 0;e=e.n)if(e.S.i!==e.i||!e.S.h()||e.S.i!==e.i)return!0;return!1},o=function(Y){for(var e=Y.s;e!==void 0;e=e.n){var a=e.S.n;if(a!==void 0)e.r=a;if(e.S.n=e,e.i=-1,e.n===void 0){Y.s=e;break}}},k=function(Y){var e=Y.s,a=void 0;while(e!==void 0){var s=e.p;if(e.i===-1){if(e.S.U(e),s!==void 0)s.n=e.n;if(e.n!==void 0)e.n.p=s}else a=e;if(e.S.n=e.r,e.r!==void 0)e.r=void 0;e=s}Y.s=a},u=function(Y){E.call(this,void 0),this.x=Y,this.s=void 0,this.g=g-1,this.f=4};var B=function(Y){var e=Y.u;if(Y.u=void 0,typeof e=="function"){P++;var a=n;n=void 0;try{e()}catch(s){throw Y.f&=-2,Y.f|=8,x(Y),s}finally{n=a,l()}}},x=function(Y){for(var e=Y.s;e!==void 0;e=e.n)e.S.U(e);Y.x=void 0,Y.s=void 0,B(Y)},m=function(Y){if(n!==this)throw new Error("Out-of-order effect");if(k(this),n=Y,this.f&=-2,8&this.f)x(this);l()},c=function(Y){this.x=Y,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32},M=function(Y){var e=new c(Y);try{e.c()}catch(a){throw e.d(),a}return e.d.bind(e)},C=Symbol.for("preact-signals"),n=void 0,T=void 0,P=0,K=0,g=0;E.prototype.brand=C;E.prototype.h=function(){return!0};E.prototype.S=function(Y){if(this.t!==Y&&Y.e===void 0){if(Y.x=this.t,this.t!==void 0)this.t.e=Y;this.t=Y}};E.prototype.U=function(Y){if(this.t!==void 0){var{e,x:a}=Y;if(e!==void 0)e.x=a,Y.e=void 0;if(a!==void 0)a.e=e,Y.x=void 0;if(Y===this.t)this.t=a}};E.prototype.subscribe=function(Y){var e=this;return M(function(){var a=e.value,s=n;n=void 0;try{Y(a)}finally{n=s}})};E.prototype.valueOf=function(){return this.value};E.prototype.toString=function(){return this.value+""};E.prototype.toJSON=function(){return this.value};E.prototype.peek=function(){var Y=n;n=void 0;try{return this.value}finally{n=Y}};Object.defineProperty(E.prototype,"value",{get:function(){var Y=f(this);if(Y!==void 0)Y.i=this.i;return this.v},set:function(Y){if(Y!==this.v){if(K>100)throw new Error("Cycle detected");this.v=Y,this.i++,g++,P++;try{for(var e=this.t;e!==void 0;e=e.x)e.t.N()}finally{l()}}}});(u.prototype=new E).h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32)return!0;if(this.f&=-5,this.g===g)return!0;if(this.g=g,this.f|=1,this.i>0&&!q(this))return this.f&=-2,!0;var Y=n;try{o(this),n=this;var e=this.x();if(16&this.f||this.v!==e||this.i===0)this.v=e,this.f&=-17,this.i++}catch(a){this.v=a,this.f|=16,this.i++}return n=Y,k(this),this.f&=-2,!0};u.prototype.S=function(Y){if(this.t===void 0){this.f|=36;for(var e=this.s;e!==void 0;e=e.n)e.S.S(e)}E.prototype.S.call(this,Y)};u.prototype.U=function(Y){if(this.t!==void 0){if(E.prototype.U.call(this,Y),this.t===void 0){this.f&=-33;for(var e=this.s;e!==void 0;e=e.n)e.S.U(e)}}};u.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var Y=this.t;Y!==void 0;Y=Y.x)Y.t.N()}};Object.defineProperty(u.prototype,"value",{get:function(){if(1&this.f)throw new Error("Cycle detected");var Y=f(this);if(this.h(),Y!==void 0)Y.i=this.i;if(16&this.f)throw this.v;return this.v}});c.prototype.c=function(){var Y=this.S();try{if(8&this.f)return;if(this.x===void 0)return;var e=this.x();if(typeof e=="function")this.u=e}finally{Y()}};c.prototype.S=function(){if(1&this.f)throw new Error("Cycle detected");this.f|=1,this.f&=-9,B(this),o(this),P++;var Y=n;return n=this,m.bind(this,Y)};c.prototype.N=function(){if(!(2&this.f))this.f|=2,this.o=T,T=this};c.prototype.d=function(){if(this.f|=8,!(1&this.f))x(this)};class S{signalsBoutique={};createSignal(Y,e){return this.signalsBoutique[Y]=p(e)}updateSignal(Y,e){this.signalsBoutique[Y]=p(e)}}class d{coreManager;constructor(Y){this.coreManager=new S;for(let e in Y)this.coreManager.createSignal(e,Y[e])}get boutique(){return this.coreManager.signalsBoutique}updateSignal(Y,e){this.coreManager.updateSignal(Y,e)}}function A(Y){const e=new d(Y);return{updateSignal:(a,s)=>e.updateSignal(a,s),boutique:e.boutique}}var J=A;export{J as default,A as createBoutique};
