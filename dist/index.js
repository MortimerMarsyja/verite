var p=function(){if(!(f>1)){var E,Y=!1;while(g!==void 0){var n=g;g=void 0,S++;while(n!==void 0){var T=n.o;if(n.o=void 0,n.f&=-3,!(8&n.f)&&w(n))try{n.c()}catch(z){if(!Y)E=z,Y=!0}n=T}}if(S=0,f--,Y)throw E}else f--};var m=function(E){if(K!==void 0){var Y=E.n;if(Y===void 0||Y.t!==K){if(Y={i:0,S:E,p:K.s,n:void 0,t:K,e:void 0,x:void 0,r:Y},K.s!==void 0)K.s.n=Y;if(K.s=Y,E.n=Y,32&K.f)E.S(Y);return Y}else if(Y.i===-1){if(Y.i=0,Y.n!==void 0){if(Y.n.p=Y.p,Y.p!==void 0)Y.p.n=Y.n;Y.p=K.s,Y.n=void 0,K.s.n=Y,K.s=Y}return Y}}},P=function(E){this.v=E,this.i=0,this.n=void 0,this.t=void 0},a=function(E){return new P(E)},w=function(E){for(var Y=E.s;Y!==void 0;Y=Y.n)if(Y.S.i!==Y.i||!Y.S.h()||Y.S.i!==Y.i)return!0;return!1},$=function(E){for(var Y=E.s;Y!==void 0;Y=Y.n){var n=Y.S.n;if(n!==void 0)Y.r=n;if(Y.S.n=Y,Y.i=-1,Y.n===void 0){E.s=Y;break}}},c=function(E){var Y=E.s,n=void 0;while(Y!==void 0){var T=Y.p;if(Y.i===-1){if(Y.S.U(Y),T!==void 0)T.n=Y.n;if(Y.n!==void 0)Y.n.p=T}else n=Y;if(Y.S.n=Y.r,Y.r!==void 0)Y.r=void 0;Y=T}E.s=n},x=function(E){P.call(this,void 0),this.x=E,this.s=void 0,this.g=e-1,this.f=4};var l=function(E){var Y=E.u;if(E.u=void 0,typeof Y=="function"){f++;var n=K;K=void 0;try{Y()}catch(T){throw E.f&=-2,E.f|=8,s(E),T}finally{K=n,p()}}},s=function(E){for(var Y=E.s;Y!==void 0;Y=Y.n)Y.S.U(Y);E.x=void 0,E.s=void 0,l(E)},F=function(E){if(K!==this)throw new Error("Out-of-order effect");if(c(this),K=E,this.f&=-2,8&this.f)s(this);p()},d=function(E){this.x=E,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32},G=function(E){var Y=new d(E);try{Y.c()}catch(n){throw Y.d(),n}return Y.d.bind(Y)},D=Symbol.for("preact-signals"),K=void 0,g=void 0,f=0,S=0,e=0;P.prototype.brand=D;P.prototype.h=function(){return!0};P.prototype.S=function(E){if(this.t!==E&&E.e===void 0){if(E.x=this.t,this.t!==void 0)this.t.e=E;this.t=E}};P.prototype.U=function(E){if(this.t!==void 0){var{e:Y,x:n}=E;if(Y!==void 0)Y.x=n,E.e=void 0;if(n!==void 0)n.e=Y,E.x=void 0;if(E===this.t)this.t=n}};P.prototype.subscribe=function(E){var Y=this;return G(function(){var n=Y.value,T=K;K=void 0;try{E(n)}finally{K=T}})};P.prototype.valueOf=function(){return this.value};P.prototype.toString=function(){return this.value+""};P.prototype.toJSON=function(){return this.value};P.prototype.peek=function(){var E=K;K=void 0;try{return this.value}finally{K=E}};Object.defineProperty(P.prototype,"value",{get:function(){var E=m(this);if(E!==void 0)E.i=this.i;return this.v},set:function(E){if(E!==this.v){if(S>100)throw new Error("Cycle detected");this.v=E,this.i++,e++,f++;try{for(var Y=this.t;Y!==void 0;Y=Y.x)Y.t.N()}finally{p()}}}});(x.prototype=new P).h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32)return!0;if(this.f&=-5,this.g===e)return!0;if(this.g=e,this.f|=1,this.i>0&&!w(this))return this.f&=-2,!0;var E=K;try{$(this),K=this;var Y=this.x();if(16&this.f||this.v!==Y||this.i===0)this.v=Y,this.f&=-17,this.i++}catch(n){this.v=n,this.f|=16,this.i++}return K=E,c(this),this.f&=-2,!0};x.prototype.S=function(E){if(this.t===void 0){this.f|=36;for(var Y=this.s;Y!==void 0;Y=Y.n)Y.S.S(Y)}P.prototype.S.call(this,E)};x.prototype.U=function(E){if(this.t!==void 0){if(P.prototype.U.call(this,E),this.t===void 0){this.f&=-33;for(var Y=this.s;Y!==void 0;Y=Y.n)Y.S.U(Y)}}};x.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var E=this.t;E!==void 0;E=E.x)E.t.N()}};Object.defineProperty(x.prototype,"value",{get:function(){if(1&this.f)throw new Error("Cycle detected");var E=m(this);if(this.h(),E!==void 0)E.i=this.i;if(16&this.f)throw this.v;return this.v}});d.prototype.c=function(){var E=this.S();try{if(8&this.f)return;if(this.x===void 0)return;var Y=this.x();if(typeof Y=="function")this.u=Y}finally{E()}};d.prototype.S=function(){if(1&this.f)throw new Error("Cycle detected");this.f|=1,this.f&=-9,l(this),$(this),f++;var E=K;return K=this,F.bind(this,E)};d.prototype.N=function(){if(!(2&this.f))this.f|=2,this.o=g,g=this};d.prototype.d=function(){if(this.f|=8,!(1&this.f))s(this)};class q{signalsBoutique={};createSignal(E,Y){return this.signalsBoutique[E]=a(Y)}updateSignal(E,Y){this.signalsBoutique[E]=a(Y)}getSignal(E){if(!this.signalsBoutique[E])throw new Error(`Signal ${String(E)} not found`);return this.signalsBoutique[E]}}class B{coreManager;constructor(E){this.coreManager=new q;for(let Y in E)this.coreManager.createSignal(Y,E[Y])}createSignal(E,Y){if(this.coreManager.getSignal(E))throw new Error(`Signal ${String(E)} already exists`);this.coreManager.createSignal(E,Y)}updateSignal(E,Y){this.coreManager.updateSignal(E,Y)}getSignal(E){return this.coreManager.getSignal(E)}}function H(E){const Y=new B(E);return{updateSignal:(n,T)=>Y.updateSignal(n,T),getSignal:(n)=>Y.getSignal(n)}}var A=H;export{A as default,H as createBoutique};
